{% extends "core/html/layouts/base-fullscreen.html" %}

{% block title %} Login {% endblock %}

<!-- Element injected in the BODY element -->
{% block body_class %} login-page {% endblock body_class %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/icheck-bootstrap/3.0.1/icheck-bootstrap.min.css" integrity="sha512-8vq2g5nHE062j3xor4XxPeZiPjmRDh6wlufQlfC6pdQ/9urJkU07NM0tEREeymP++NczacJ/Q59ul+/K2eYvcg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="/static/assets/css/adminlte.css">

{% endblock stylesheets %}

{% block content %}

<style>
  .otp-input {
    display: flex;
    justify-content: center;
    gap: 10px;
  }

  .otp-input input {
    width: 50px;
    height: 50px;
    font-size: 24px;
    text-align: center;
    border: 2px solid #ddd;
    border-radius: 5px;
    outline: none;
    transition: border-color 0.3s;
  }

  .otp-input input:focus {
    border-color: #6c63ff;
  }
</style>
<div class="login-box">

  <div class="login-logo">
    <a href="/"><b>FastAPI</b> CleanSTRUCTURE</a>
  </div>

  <!-- /.login-logo -->
  <div id="card_login" class="card">
    <div class="card-body login-card-body">
      <p class="login-box-msg">Terahir kali anda login dengan</p>

      <div id="list_users" class="list-group">
        {% for data_user in data_users %}
        <a href="#" class="list-group-item list-group-item-action" id="{{data_user.username}}" iduser="{{data_user.email}}">
          <div class="ms-2 me-auto">
            <div class="fw-bold"><b>{{data_user.full_name}}</b></div>
            {{data_user.email}}
          </div>
        </a>
        {% endfor %}
      </div>

      <div id="card_otp" class="card p-3 text-center mt-2" style="display: none;">
        <h4 class="card-title mb-3"><b>OTP Verivikasi</b></h4>
        <h6 class="card-subtitle text-body-secondary mb-4">Masukkan kode verifikasi 4 digit yang dikirimkan ke nomor telepon Anda.</h6>

        <form id="formLoggedin" autocomplete="off">
          <div class="otp-input">
            <input type="text" maxlength="1" id="otp1" name="otp1" oninput="moveToNext(this, 'otp2')" required data-msg="">
            <input type="text" maxlength="1" id="otp2" name="otp2" oninput="moveToNext(this, 'otp3')" required data-msg="">
            <input type="text" maxlength="1" id="otp3" name="otp3" oninput="moveToNext(this, 'otp4')" required data-msg="">
            <input type="text" maxlength="1" id="otp4" name="otp4" oninput="moveToNext(this, '')" required data-msg="">
          </div>
          <div id="otp-error" class="error invalid-feedback"></div>
          <input type="hidden" id="email">
          <button type="submit" class="btn btn-info mt-3 mb-2">Verif Akun</button>
        </form>
        <p class="resend">Tidak menerima kode? <a href="#">Resend</a></p>
      </div>
      <p class="mb-1 mt-3">
        <a href="/auth/login">Login Akun lain</a>
      </p>
    </div>
    <!-- /.login-card-body -->
  </div>

</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.21.0/localization/messages_id.min.js" integrity="sha512-Orvt00GKq6XzBWqbltE094YknH2BN78wpQqLT/P3Jx3nhaBmEbd7JzVDJ2qLTu8J8SuMoACKoIxk851FS5ZIUA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script> setTimeout(function () { window.location.href = "/auth/timeout/formlogin" }, 30 * 60 * 1000);</script>
<script src="{{prefix_url_js}}.js?redirect_uri={{redirect_uri}}"></script>

{% endblock javascripts %}